<section class="dashboard">
  <form [formGroup]="filters" class="filters">
    <input type="date" formControlName="from">
    <input type="date" formControlName="to">
    <select formControlName="channel">
      <option value="all">{{ 'dash.allChannels' | t }}</option>
      <option value="facebook">{{ 'dash.facebook' | t }}</option>
      <option value="google">{{ 'dash.google' | t }}</option>
    </select>
  </form>

  <div class="kpi-grid">
    <div class="kpi-card card glass">
      <h3>{{ 'dash.views' | t }}</h3>
      <strong>{{kpi.views | number}}</strong>
    </div>
    <div class="kpi-card card glass">
      <h3>{{ 'dash.messages' | t }}</h3>
      <strong>{{kpi.messages | number}}</strong>
    </div>
    <div class="kpi-card card glass">
      <h3>{{ 'dash.conversions' | t }}</h3>
      <strong>{{kpi.conversions | number}}</strong>
    </div>
    <div class="kpi-card card glass">
      <h3>{{ 'dash.ctr' | t }}</h3>
      <strong>{{kpi.ctr | number:'1.0-2'}}%</strong>
    </div>
    <div class="kpi-card card glass">
      <h3>{{ 'dash.alerts' | t }}</h3>
      <strong>{{kpi.alerts}}</strong>
    </div>
  </div>

  <div class="main-grid">
    <div class="panel card">
      <h3 class="panel-title">{{ 'dash.performance' | t }}</h3>
      <app-line-chart [labels]="labels" [series]="[{ label: 'Performance', values: series }]"></app-line-chart>
    </div>
    <aside class="panel card glass notifications">
      <h3 class="panel-title">{{ 'notifications.title' | t }}</h3>
      <ul class="n-list">
        <li *ngFor="let n of (notifications$ | async)">
          <span class="dot" [class.info]="n.level==='info'" [class.warning]="n.level==='warning'" [class.error]="n.level==='error'" [class.success]="n.level==='success'"></span>
          <span class="msg">{{ n.message }}</span>
          <small>{{ n.createdAt | date:'short' }}</small>
        </li>
      </ul>
    </aside>
  </div>
</section>
