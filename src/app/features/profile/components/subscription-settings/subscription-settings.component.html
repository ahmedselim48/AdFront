<div class="subscription-settings">
  <div class="subscription-content">
    
    <!-- Current Subscription -->
    <mat-card class="subscription-card" *ngIf="subscriptionStatus">
      <mat-card-header>
        <mat-card-title>اشتراكك الحالي</mat-card-title>
        <mat-card-subtitle>معلومات اشتراكك الحالي</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <div class="subscription-info">
          <div class="subscription-status" [class]="subscriptionStatus.hasActive ? 'active' : 'inactive'">
            <lucide-icon [name]="subscriptionStatus.hasActive ? 'check-circle' : 'x-circle'" size="24"></lucide-icon>
            <span>{{ subscriptionStatus.hasActive ? 'نشط' : 'غير نشط' }}</span>
          </div>
          
          <div class="subscription-details" *ngIf="subscriptionStatus.hasActive">
            <div class="detail-item">
              <lucide-icon name="calendar" size="16"></lucide-icon>
              <span>متبقي: {{ subscriptionStatus.daysRemaining }} يوم</span>
            </div>
            <div class="detail-item" *ngIf="subscriptionStatus.endDate">
              <lucide-icon name="calendar" size="16"></lucide-icon>
              <span>ينتهي في: {{ formatDate(subscriptionStatus.endDate) }}</span>
            </div>
          </div>

          <div class="subscription-progress" *ngIf="subscriptionStatus.hasActive">
            <div class="progress-info">
              <span>مدة الاشتراك</span>
              <span>{{ subscriptionStatus.daysRemaining }} يوم متبقي</span>
            </div>
            <mat-progress-bar 
              [value]="(subscriptionStatus.daysRemaining / 30) * 100" 
              mode="determinate">
            </mat-progress-bar>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Subscription Plans -->
    <mat-card class="plans-card">
      <mat-card-header>
        <mat-card-title>خطط الاشتراك</mat-card-title>
        <mat-card-subtitle>اختر الخطة المناسبة لك</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <div class="plans-grid">
          <!-- Free Plan -->
          <div class="plan-card free-plan">
            <div class="plan-header">
              <h3>مجاني</h3>
              <div class="plan-price">
                <span class="price">0</span>
                <span class="currency">ر.س</span>
                <span class="period">/شهر</span>
              </div>
            </div>
            <div class="plan-features">
              <div class="feature-item">
                <lucide-icon name="check" size="16"></lucide-icon>
                <span>5 إعلانات شهرياً</span>
              </div>
              <div class="feature-item">
                <lucide-icon name="check" size="16"></lucide-icon>
                <span>صور أساسية</span>
              </div>
              <div class="feature-item">
                <lucide-icon name="check" size="16"></lucide-icon>
                <span>دعم أساسي</span>
              </div>
            </div>
            <div class="plan-action">
              <button mat-stroked-button [disabled]="!subscriptionStatus?.hasActive">
                الخطة الحالية
              </button>
            </div>
          </div>

          <!-- Pro Plan -->
          <div class="plan-card pro-plan">
            <div class="plan-header">
              <h3>Pro</h3>
              <div class="plan-price">
                <span class="price">99</span>
                <span class="currency">ر.س</span>
                <span class="period">/شهر</span>
              </div>
            </div>
            <div class="plan-features">
              <div class="feature-item">
                <lucide-icon name="check" size="16"></lucide-icon>
                <span>إعلانات غير محدودة</span>
              </div>
              <div class="feature-item">
                <lucide-icon name="check" size="16"></lucide-icon>
                <span>صور عالية الجودة</span>
              </div>
              <div class="feature-item">
                <lucide-icon name="check" size="16"></lucide-icon>
                <span>أدوات الذكاء الاصطناعي</span>
              </div>
              <div class="feature-item">
                <lucide-icon name="check" size="16"></lucide-icon>
                <span>تحليلات متقدمة</span>
              </div>
              <div class="feature-item">
                <lucide-icon name="check" size="16"></lucide-icon>
                <span>دعم أولوية</span>
              </div>
            </div>
            <div class="plan-action">
              <button 
                mat-raised-button 
                color="primary" 
                (click)="onUpgrade()"
                [disabled]="subscriptionStatus?.hasActive">
                <lucide-icon name="crown" size="18" class="me-2"></lucide-icon>
                {{ subscriptionStatus?.hasActive ? 'مشترك' : 'ترقية' }}
              </button>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Subscription Actions -->
    <mat-card class="actions-card" *ngIf="subscriptionStatus?.hasActive">
      <mat-card-header>
        <mat-card-title>إدارة الاشتراك</mat-card-title>
        <mat-card-subtitle>إدارة اشتراكك الحالي</mat-card-subtitle>
      </mat-card-header>
      
      <mat-card-content>
        <div class="subscription-actions">
          <button mat-stroked-button color="warn" (click)="onCancel()">
            إلغاء الاشتراك
          </button>
          <button mat-raised-button color="primary" (click)="onUpgrade()">
            تجديد الاشتراك
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
