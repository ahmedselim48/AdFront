<section class="ads-wrap container py-4">
  <h2 class="mb-4">{{ 'ads.createTitle' | t }}</h2>


<!-- Tabs -->
<ul class="nav nav-pills mb-4 card p-2 d-flex flex-row gap-2 flex-wrap" role="tablist">
  <li class="nav-item">
    <button class="nav-link active">All</button>
  </li>
  <li class="nav-item">
    <button class="nav-link">Draft</button>
  </li>
  <li class="nav-item">
    <button class="nav-link">Scheduled</button>
  </li>
  <li class="nav-item">
    <button class="nav-link">Published</button>
  </li>
</ul>


  <!-- Form -->
  <form [formGroup]="form" (ngSubmit)="save()">
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">{{ 'common.name' | t }}</label>
        <input formControlName="name" class="form-control" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Category</label>
        <input formControlName="category" class="form-control" />
      </div>
      <div class="col-md-6">
        <label class="form-label">Price</label>
        <input type="number" formControlName="price" class="form-control" />
      </div>
      <div class="col-md-6">
        <label class="form-label">{{ 'ads.status' | t }}</label>
        <select formControlName="status" class="form-select">
          <option value="draft">{{ 'status.draft' | t }}</option>
          <option value="scheduled">{{ 'status.scheduled' | t }}</option>
          <option value="active">{{ 'status.active' | t }}</option>
          <option value="paused">{{ 'status.paused' | t }}</option>
        </select>
      </div>
      <div class="col-md-6">
        <label class="form-label">{{ 'ads.scheduleAt' | t }}</label>
        <input type="datetime-local" formControlName="scheduleAt" class="form-control" />
      </div>
    </div>

    <!-- Variants Section -->
    <div class="variants mt-5">
      <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
        <h3 class="h5">{{ 'ads.variants' | t }}</h3>
        <div class="d-flex gap-2 flex-wrap">
          <button type="button" class="btn btn-outline-gradient" (click)="generateFromAI()" [disabled]="generating">
            {{ 'smart.generate' | t }}
          </button>
          <button type="button" class="btn btn-gradient" (click)="addVariant()">
            {{ 'ads.addVariant' | t }}
          </button>
        </div>
      </div>

      <div class="row g-3">
        <div class="col-md-6" *ngFor="let v of variants.controls; let i = index" [formGroup]="$any(v)">
          <div class="card p-3 shadow-sm ad-form">
            <div class="mb-3">
              <label class="form-label">{{ 'common.title' | t }}</label>
              <input formControlName="title" class="form-control" />
            </div>
            <div class="mb-3">
              <label class="form-label">{{ 'ads.body' | t }}</label>
              <textarea formControlName="body" class="form-control" rows="3"></textarea>
            </div>
            <div class="form-check mb-3">
              <input type="checkbox" formControlName="isActive" class="form-check-input" />
              <label class="form-check-label">{{ 'common.active' | t }}</label>
            </div>
            <div class="mb-3">
              <input type="file" class="form-control" (change)="onFile($event, i)" />
            </div>
            <button type="button" class="btn btn-danger btn-sm" (click)="removeVariant(i)">
              {{ 'common.remove' | t }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Save -->
    <div class="mt-4 d-flex gap-2 flex-wrap">
      <button type="submit" class="btn btn-gradient px-4" [disabled]="form.invalid">
        {{ 'common.save' | t }}
      </button>
      <!-- <button type="button" class="btn btn-outline-gradient px-4" (click)="fillWithAI()">
        {{ 'ads.fillWithAI' | t : 'Fill with AI' }}
      </button> -->
    </div>
  </form>
</section>
