<!-- لوحة التحكم الإدارية الرئيسية -->
<div class="admin-dashboard" dir="rtl">
  <!-- Header -->
  <div class="dashboard-header">
    <h1 class="dashboard-title">
      <mat-icon>dashboard</mat-icon>
      لوحة التحكم الإدارية
    </h1>
    <button mat-raised-button color="primary" (click)="refreshData()" [disabled]="loading">
      <mat-icon>refresh</mat-icon>
      تحديث البيانات
    </button>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>جاري تحميل البيانات...</p>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!loading" class="dashboard-content">
    
    <!-- Statistics Cards -->
    <div class="stats-grid">
      <!-- إجمالي المستخدمين -->
      <mat-card class="stat-card users-card">
        <mat-card-content>
          <div class="stat-content">
            <div class="stat-icon">
              <mat-icon>people</mat-icon>
            </div>
            <div class="stat-info">
              <h3>{{ stats.totalUsers | number }}</h3>
              <p>إجمالي المستخدمين</p>
              <span class="growth-indicator positive">
                <mat-icon>trending_up</mat-icon>
                +{{ stats.monthlyGrowth }}%
              </span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- إجمالي الإعلانات -->
      <mat-card class="stat-card ads-card">
        <mat-card-content>
          <div class="stat-content">
            <div class="stat-icon">
              <mat-icon>campaign</mat-icon>
            </div>
            <div class="stat-info">
              <h3>{{ stats.totalAds | number }}</h3>
              <p>إجمالي الإعلانات</p>
              <div class="stat-details">
                <span class="active-ads">{{ stats.activeAds }} نشط</span>
                <span class="pending-ads">{{ stats.pendingAds }} في الانتظار</span>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- إجمالي الفئات -->
      <mat-card class="stat-card categories-card">
        <mat-card-content>
          <div class="stat-content">
            <div class="stat-icon">
              <mat-icon>category</mat-icon>
            </div>
            <div class="stat-info">
              <h3>{{ stats.totalCategories | number }}</h3>
              <p>إجمالي الفئات</p>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- إجمالي المشاهدات -->
      <mat-card class="stat-card views-card">
        <mat-card-content>
          <div class="stat-content">
            <div class="stat-icon">
              <mat-icon>visibility</mat-icon>
            </div>
            <div class="stat-info">
              <h3>{{ stats.totalViews | number }}</h3>
              <p>إجمالي المشاهدات</p>
              <span class="likes-count">
                <mat-icon>favorite</mat-icon>
                {{ stats.totalLikes | number }} إعجاب
              </span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Charts and Progress Section -->
    <div class="charts-section">
      <div class="chart-container">
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>
              <mat-icon>show_chart</mat-icon>
              تقارير شهرية
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="chart-placeholder">
              <mat-icon class="chart-icon">bar_chart</mat-icon>
              <p>مخطط الإحصائيات الشهرية</p>
              <div class="chart-data">
                <div *ngFor="let data of monthlyData" class="month-data">
                  <span class="month">{{ data.month }}</span>
                  <div class="data-bars">
                    <div class="bar users-bar" [style.width.%]="(data.users / 100) * 100">
                      <span>{{ data.users }}</span>
                    </div>
                    <div class="bar ads-bar" [style.width.%]="(data.ads / 200) * 100">
                      <span>{{ data.ads }}</span>
                    </div>
                    <div class="bar views-bar" [style.width.%]="(data.views / 1000) * 100">
                      <span>{{ data.views }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>

      <!-- Progress Goals -->
      <div class="progress-container">
        <mat-card class="progress-card">
          <mat-card-header>
            <mat-card-title>
              <mat-icon>track_changes</mat-icon>
              أهداف التقدم
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="progress-goals">
              <div *ngFor="let goal of progressGoals" class="progress-item">
                <div class="progress-header">
                  <mat-icon [class]="goal.color">{{ goal.icon }}</mat-icon>
                  <span class="progress-title">{{ goal.title }}</span>
                  <span class="progress-percentage">
                    {{ getProgressPercentage(goal.current, goal.target) | number:'1.0-0' }}%
                  </span>
                </div>
                <mat-progress-bar 
                  mode="determinate" 
                  [value]="getProgressPercentage(goal.current, goal.target)"
                  [color]="goal.color">
                </mat-progress-bar>
                <div class="progress-details">
                  <span>{{ goal.current }} من {{ goal.target }}</span>
                </div>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <mat-card class="actions-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>flash_on</mat-icon>
            إجراءات سريعة
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="action-buttons">
            <button mat-raised-button color="primary" routerLink="/admin/users">
              <mat-icon>people</mat-icon>
              إدارة المستخدمين
            </button>
            <button mat-raised-button color="accent" routerLink="/admin/ads">
              <mat-icon>campaign</mat-icon>
              إدارة الإعلانات
            </button>
            <button mat-raised-button color="warn" routerLink="/admin/categories">
              <mat-icon>category</mat-icon>
              إدارة الفئات
            </button>
            <button mat-raised-button routerLink="/admin/reports">
              <mat-icon>assessment</mat-icon>
              التقارير
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>