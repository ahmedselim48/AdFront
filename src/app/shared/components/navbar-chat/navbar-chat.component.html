<button class="chat-button" (click)="goToMessagesPage()" aria-label="Chat">
  <span class="icon">ðŸ’¬</span>
  <span class="badge" *ngIf="unreadTotal > 0">{{ unreadTotal }}</span>
  <span class="label">Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</span>
  </button>

<div class="chat-menu">
  <div class="header">
    <span>Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª</span>
    <button class="view-all" (click)="goToMessagesPage()">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>
  </div>

  <div class="list" *ngIf="!loading; else loadingTpl">
    <div class="item" *ngFor="let c of conversations" (click)="openConversation(c)">
      <img [src]="c.otherImageUrl || '/assets/default-avatar.png'" alt="avatar" />
      <div class="meta">
        <div class="row">
          <span class="name">{{ c.otherName }}</span>
          <span class="time">{{ c.lastAt | date:'short' }}</span>
        </div>
        <div class="preview">{{ c.lastMessage }}</div>
      </div>
      <span class="unread" *ngIf="c.unreadCount > 0">{{ c.unreadCount }}</span>
    </div>
  </div>

  <ng-template #loadingTpl>
    <div class="loading">Ø¬Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦</div>
  </ng-template>
</div>


